<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>WellNest – All-in-One Health Tracker</title>
  <link rel="stylesheet" href="style.css?v=20241005" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#A8E6CF">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="WellNest">
  <link rel="apple-touch-icon" href="images/fitness-logo.svg">
  
  <!-- Force Cache Clear Script -->
  <script>
    // Clear all caches on load to prevent old version issues
    if ('caches' in window) {
      caches.keys().then(function(names) {
        names.forEach(function(name) {
          if (name.indexOf('wellnest') !== -1 && name.indexOf('v3-fixed') === -1) {
            caches.delete(name).then(() => {
              console.log('Cleared old cache:', name);
            });
          }
        });
      });
    }
    
    // Force reload if cached version detected
    if (performance.navigation.type === 1 && !sessionStorage.getItem('force-refresh-done')) {
      sessionStorage.setItem('force-refresh-done', 'true');
      location.reload(true);
    }
  </script>
</head>

<body>
  <!-- 🌿 Navigation Bar -->
  <nav>
    <div class="logo-container">
      <img src="images/fitness-logo.svg" alt="WellNest Fitness Logo" />
      <h1>WellNest</h1>
    </div>
    
    <!-- Hamburger Menu Button -->
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
    
    <ul id="navMenu">
      <li><a href="index.html" class="active">Home</a></li>
      <li><a href="#" onclick="checkAuth('body.html')">Body</a></li>
      <li><a href="#" onclick="checkAuth('bodyhealth.html')">Body Health</a></li>
      <li><a href="#" onclick="checkAuth('mind.html')">Mind</a></li>
      <li><a href="#" onclick="checkAuth('sleep.html')">Sleep</a></li>
      <li><a href="#" onclick="checkAuth('diet.html')">Diet</a></li>
      <li><a href="#" onclick="checkAuth('workout.html')">Workout</a></li>
      <li><a href="#" onclick="checkAuth('care.html')">Care</a></li>
      <li><a href="#" onclick="checkAuth('pray.html')">Prayer</a></li>
      <li><a href="#" onclick="checkAuth('reminders.html')">Reminders</a></li>
      <li><a href="login.html" id="loginLink">Login</a></li>
      <li><a href="signup.html" id="signupLink">Sign Up</a></li>
      <li><a href="#" onclick="logout()" id="logoutLink" style="display:none;">Logout</a></li>
    </ul>
  </nav>

  <!-- 🌸 Hero Section -->
  <section class="hero">
    <div class="hero-text">
      <h2>Track Your Wellness Naturally 🌿</h2>
      <p>
        Welcome to <strong>WellNest</strong> — your all-in-one health tracker for body, mind, sleep, and nutrition. 
        Embrace balance, live consciously, and nurture your wellness journey.
      </p>
      <div class="auth-buttons">
        <button onclick="window.location.href='login.html'" class="login-btn">Login to Start</button>
        <button onclick="window.location.href='signup.html'" class="signup-btn">Sign Up Free</button>
      </div>
      <div class="ai-assistant-section">
        <button onclick="checkAuth('aiassistant.html')" class="ai-assistant-btn">
          <span class="ai-icon">🤖</span>
          <span class="ai-text">Try AI Health Assistant</span>
        </button>
        <p class="ai-description">Get personalized health advice and smart wellness insights</p>
      </div>
    </div>
    <div class="hero-img">
      <img src="images/fit.webp" alt="Nature Wellness Illustration" />
    </div>
  </section>

  <!-- 🍃 About Section -->
  <section class="section" id="about">
    <h2>Why WellNest?</h2>
    <p>
      WellNest combines fitness tracking, mindfulness, diet planning, and healthy reminders into one smart system — 
      inspired by nature, designed for your well-being.
    </p>

    <div class="card-container">
      <div class="card">
        <img src="images/yoga.svg" alt="Yoga Icon" />
        <h3>Mindfulness</h3>
        <p>Track your meditation sessions and stress levels. Stay calm and centered.</p>
      </div>
      <div class="card">
        <img src="images/diet.svg" alt="Healthy Diet Icon" />
        <h3>Smart Diet</h3>
        <p>Monitor your meals, calories, and hydration with beautiful visual tracking.</p>
      </div>
      <div class="card">
        <img src="images/sleep.svg" alt="Sleep Tracker Icon" />
        <h3>Sleep Tracker</h3>
        <p>Improve your rest with sleep insights and bedtime reminders.</p>
      </div>
    </div>
  </section>

  <!-- 🌱 Call-to-Action Section -->
  <section class="section" style="background: #A8E6CF;">
    <h2>Join the Wellness Revolution 🌸</h2>
    <p>
      Start your natural journey today — because health isn’t just fitness, it’s harmony.
    </p>
    <button onclick="window.location.href='signup.html'" style="background:#379683; color:white;">Join Now</button>
  </section>

  <!-- 🌿 Footer -->
  <footer>
    <p>© 2025 WellNest | Designed with 💚 by Tahreem Fatima</p>
  </footer>

  <script>
    // Hamburger Menu Functionality
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');

    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      navMenu.classList.toggle('active');
    });

    // Close menu when clicking on a link
    document.querySelectorAll('#navMenu a').forEach(link => {
      link.addEventListener('click', () => {
        hamburger.classList.remove('active');
        navMenu.classList.remove('active');
      });
    });

    // Authentication System
    function checkAuth(page) {
      const isLoggedIn = localStorage.getItem('wellnest_user');
      
      if (isLoggedIn) {
        window.location.href = page;
      } else {
        alert('🔒 Please login to access your wellness journey! 🌿');
        window.location.href = 'login.html';
      }
    }

    function logout() {
      localStorage.removeItem('wellnest_user');
      localStorage.removeItem('wellnest_user_data');
      alert('👋 Logged out successfully! See you soon! 🌿');
      updateAuthUI();
    }

    function updateAuthUI() {
      const isLoggedIn = localStorage.getItem('wellnest_user');
      const userData = JSON.parse(localStorage.getItem('wellnest_user_data') || '{}');
      
      const loginLink = document.getElementById('loginLink');
      const signupLink = document.getElementById('signupLink');
      const logoutLink = document.getElementById('logoutLink');
      
      if (isLoggedIn) {
        loginLink.style.display = 'none';
        signupLink.textContent = `Hi, ${userData.firstName || 'User'}!`;
        signupLink.href = '#';
        signupLink.onclick = () => alert(`Welcome ${userData.firstName}! 🌿\\nEmail: ${userData.email}\\nFitness Goal: ${userData.fitnessGoal}`);
        logoutLink.style.display = 'block';
        
        // Update hero buttons for logged in users
        const heroText = document.querySelector('.hero-text .auth-buttons');
        const aiSection = document.querySelector('.hero-text .ai-assistant-section');
        if (heroText) {
          heroText.innerHTML = `
            <button onclick="window.location.href='body.html'" class="dashboard-btn">Go to Dashboard</button>
            <button onclick="window.location.href='diet.html'" class="track-btn">Start Tracking</button>
          `;
        }
        if (aiSection) {
          aiSection.innerHTML = `
            <button onclick="window.location.href='aiassistant.html'" class="ai-assistant-btn logged-in">
              <span class="ai-icon">🤖</span>
              <span class="ai-text">AI Health Assistant</span>
            </button>
            <p class="ai-description">Get personalized health advice and smart wellness insights</p>
          `;
        }
      } else {
        loginLink.style.display = 'block';
        signupLink.textContent = 'Sign Up';
        signupLink.href = 'signup.html';
        signupLink.onclick = null;
        logoutLink.style.display = 'none';
      }
    }

    // Check authentication status on page load
    document.addEventListener('DOMContentLoaded', function() {
      updateAuthUI();
      
      // Remove any test buttons that might appear from cache
      setTimeout(() => {
        const testButtons = document.querySelectorAll('button[onclick*="test"], .test-reminder-btn, .test-btn');
        testButtons.forEach(btn => {
          if (btn.textContent.toLowerCase().includes('test')) {
            btn.remove();
            console.log('Removed cached test button:', btn);
          }
        });
      }, 1000);
    });
  </script>

  <style>
    /* AI Assistant Button Styling */
    .ai-assistant-section {
      margin-top: 30px;
      text-align: center;
    }

    .ai-assistant-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 50px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      text-decoration: none;
    }

    .ai-assistant-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
      background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
    }

    .ai-assistant-btn.logged-in {
      background: linear-gradient(135deg, #A8E6CF 0%, #79C9AF 100%);
      color: #2C6E63;
      box-shadow: 0 4px 15px rgba(121, 201, 175, 0.3);
    }

    .ai-assistant-btn.logged-in:hover {
      background: linear-gradient(135deg, #90e0b8 0%, #6bb89a 100%);
      box-shadow: 0 6px 25px rgba(121, 201, 175, 0.4);
    }

    .ai-icon {
      font-size: 20px;
      animation: pulse 2s infinite;
    }

    .ai-text {
      font-family: 'Poppins', sans-serif;
      letter-spacing: 0.5px;
    }

    .ai-description {
      margin-top: 15px;
      font-size: 14px;
      color: #666;
      font-style: italic;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.4;
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .ai-assistant-section {
        margin-top: 25px;
      }

      .ai-assistant-btn {
        padding: 12px 25px;
        font-size: 15px;
        width: 100%;
        max-width: 280px;
      }

      .ai-description {
        font-size: 13px;
        margin-top: 12px;
        padding: 0 20px;
      }
    }
  </style>
</body>
</html>
